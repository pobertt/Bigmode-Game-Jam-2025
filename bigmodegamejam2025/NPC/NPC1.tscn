[gd_scene load_steps=7 format=3 uid="uid://c7pamyh56glp1"]

[ext_resource type="PackedScene" uid="uid://bvlov7wbeurky" path="res://NPC/animsfornpc1.tscn" id="1_3yt5e"]
[ext_resource type="Script" path="res://NPC/npc_1.gd" id="1_yfbne"]
[ext_resource type="PackedScene" uid="uid://c8giknctto3q0" path="res://Enemy/cone.tscn" id="2_ds6il"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_iaepi"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_se6b1"]
points = PackedVector3Array(-0.000195742, 1, -0.000195742, 0.194988, -1, -0.980814, -0.000195742, -1, -1, -0.195184, -1, -0.980814, -0.382733, -1, -0.924041, -0.555599, -1, -0.831637, -0.707126, -1, -0.707126, -0.831637, -1, -0.555599, -0.924041, -1, -0.382733, -0.980814, -1, -0.195184, -1, -1, -0.000195742, -0.980814, -1, 0.194988, -0.924041, -1, 0.382537, -0.831637, -1, 0.555403, -0.707126, -1, 0.70693, -0.555599, -1, 0.831441, -0.382733, -1, 0.923845, -0.195184, -1, 0.980619, -0.000195742, -1, 1, 0.194988, -1, 0.980619, 0.382537, -1, 0.923845, 0.555403, -1, 0.831441, 0.70693, -1, 0.70693, 0.831441, -1, 0.555403, 0.923845, -1, 0.382537, 0.980619, -1, 0.194988, 1, -1, -0.000195742, 0.980619, -1, -0.195184, 0.923845, -1, -0.382733, 0.831441, -1, -0.555599, 0.70693, -1, -0.707126, 0.555403, -1, -0.831637, 0.382537, -1, -0.924041)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_5k4xv"]

[node name="NPC" type="CharacterBody3D"]
script = ExtResource("1_yfbne")

[node name="animsfornpc" parent="." instance=ExtResource("1_3yt5e")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.915666, 0)

[node name="Skeleton3D" parent="animsfornpc/Armature" index="0"]
bones/0/position = Vector3(-0.103298, 0.676203, -107.224)
bones/0/rotation = Quaternion(-0.486167, 0.0664464, -0.016655, 0.871177)
bones/1/position = Vector3(-8.04663e-07, 9.49147, -0.465551)
bones/1/rotation = Quaternion(0.098296, 0.0208226, 0.0277616, 0.994552)
bones/2/position = Vector3(-5.96046e-07, 11.0867, 1.28895e-05)
bones/2/rotation = Quaternion(0.0907569, 0.01333, 0.0177519, 0.995626)
bones/3/position = Vector3(1.41561e-06, 12.6705, -1.2219e-05)
bones/3/rotation = Quaternion(0.0908725, 0.0122582, 0.0178845, 0.995627)
bones/4/rotation = Quaternion(-0.0898824, -0.0109651, -0.00309804, 0.995887)
bones/5/rotation = Quaternion(-0.305421, -0.0571272, -0.0510072, 0.949133)
bones/7/position = Vector3(12.6184, 10.7107, -0.183386)
bones/7/rotation = Quaternion(-0.60897, -0.386892, 0.553758, -0.41572)
bones/8/position = Vector3(2.08656e-05, 26.2031, 9.25333e-07)
bones/8/rotation = Quaternion(0.420117, -0.144612, -0.0830359, 0.892017)
bones/9/position = Vector3(-2.61998e-07, 14.6067, 1.12087e-05)
bones/9/rotation = Quaternion(0.0177075, 0.000123043, 0.341545, 0.939699)
bones/10/position = Vector3(-3.09944e-06, 18.9079, -3.36766e-06)
bones/11/position = Vector3(-12.6184, 10.7098, -0.164308)
bones/11/rotation = Quaternion(0.637928, -0.361032, 0.52812, 0.428712)
bones/12/position = Vector3(-3.27036e-06, 26.2031, 3.5354e-06)
bones/12/rotation = Quaternion(0.365277, 0.181059, -0.173238, 0.896537)
bones/13/position = Vector3(-2.81154e-06, 14.608, 2.81424e-06)
bones/13/rotation = Quaternion(0.0313048, -0.000543332, -0.55949, 0.828245)
bones/14/position = Vector3(7.03335e-06, 18.9102, 6.82472e-06)
bones/15/position = Vector3(9.95693, -5.27536, 0.178729)
bones/15/rotation = Quaternion(0.0549735, 0.517721, 0.852191, -0.0520932)
bones/16/rotation = Quaternion(-0.548488, -0.075859, 0.0341277, 0.832011)
bones/17/rotation = Quaternion(0.544096, -0.0217379, -0.0032447, 0.838735)
bones/18/position = Vector3(-2.29742e-07, 19.8081, 3.98625e-07)
bones/18/rotation = Quaternion(0.405405, -0.033901, 0.00866379, 0.913467)
bones/19/position = Vector3(-7.59959e-07, 7.85699, -2.08616e-07)
bones/20/position = Vector3(-9.95693, -5.27537, -0.0830115)
bones/20/rotation = Quaternion(-0.105381, 0.46593, 0.878407, -0.0143472)
bones/21/position = Vector3(-8.87683e-07, 52.1585, 1.20697e-07)
bones/21/rotation = Quaternion(-0.438283, -0.0627057, -0.0109782, 0.89658)
bones/22/rotation = Quaternion(0.649014, 0.143734, -0.0852145, 0.742199)
bones/23/position = Vector3(6.98029e-07, 20.1559, -3.39384e-08)
bones/23/rotation = Quaternion(0.307085, 0.0338794, -0.0109396, 0.951016)

[node name="Physical Bone mixamorig_Hips" parent="animsfornpc/Armature/Skeleton3D" index="2"]
transform = Transform3D(99.0615, 13.0066, 4.20117, -9.36274, 86.9652, -48.4705, -9.9579, 47.6222, 87.3669, -0.302929, 2.97918, -111.375)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.3913e-07, 3.60422e-07, 0.0475136)
body_offset = Transform3D(100, 4.57764e-05, -4.29153e-06, -6.19888e-06, 4.89911, -99.8799, -4.52995e-05, 99.8799, 4.89912, -1.37091e-05, 4.74565, -0.232811)

[node name="Physical Bone mixamorig_Spine" parent="animsfornpc/Armature/Skeleton3D" index="3"]
transform = Transform3D(98.1373, 18.2656, 5.95394, -9.25403, 72.1037, -68.6689, -16.8358, 66.8388, 72.4509, -0.832544, 9.08872, -119.543)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.31752e-07, 4.97983e-08, 0.0554316)
body_offset = Transform3D(100, -2.67029e-05, 3.52859e-05, 4.1008e-05, -1.14441e-05, -100, 2.24113e-05, 100, -3.8147e-06, 2.12193e-05, 5.54317, -4.76837e-06)

[node name="Physical Bone mixamorig_Spine1" parent="animsfornpc/Armature/Skeleton3D" index="4"]
transform = Transform3D(97.3897, 21.9525, 5.77402, -8.333, 58.2375, -80.8638, -21.1143, 78.2719, 58.5466, -1.52841, 18.0178, -127.268)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.15388e-07, -1.31356e-07, 0.0633458)
body_offset = Transform3D(100, 9.53674e-07, 6.67572e-06, 1.14441e-05, 0, -100, -3.8147e-06, 100, 2.67029e-05, -4.19617e-05, 6.33458, 1.14441e-05)

[node name="Physical Bone mixamorig_Spine2" parent="animsfornpc/Armature/Skeleton3D" index="5"]
transform = Transform3D(96.6151, 25.3194, 4.94434, -6.49751, 42.4308, -90.3184, -24.966, 86.9399, 42.6397, -2.24648, 29.5774, -134.016)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.91119e-07, -4.89757e-08, 0.0712605)
body_offset = Transform3D(100, 2.24113e-05, -2.71797e-05, -2.28882e-05, 7.62939e-06, -100, -2.59876e-05, 100, 4.19617e-05, 7.10487e-05, 7.12605, 1.90735e-06)

[node name="Physical Bone mixamorig_Neck" parent="animsfornpc/Armature/Skeleton3D" index="6"]
transform = Transform3D(-97.1779, -23.5086, 1.9516, 5.92476, -32.3317, -94.4434, 22.8333, -91.6625, 32.8121, -2.70786, 41.2832, -138.885)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.66614e-07, 1.0943e-06, 0.0557764)
body_offset = Transform3D(-100, -2.16961e-05, 9.53674e-06, -2.00272e-05, 28.6669, -95.8029, 2.26498e-05, -95.803, -28.6669, -3.71933e-05, 5.34351, 1.59904)

[node name="Physical Bone mixamorig_Head" parent="animsfornpc/Armature/Skeleton3D" index="7"]
transform = Transform3D(-99.637, -6.89162, 4.99686, 2.78103, -81.8322, -57.4087, 8.04543, -57.0613, 81.7268, -3.45977, 53.9397, -151.233)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.95082e-08, -5.84871e-07, 0.128691)
body_offset = Transform3D(-100, -1.23978e-05, -3.93391e-06, -4.17233e-06, 28.667, -95.8029, 1.26362e-05, -95.8029, -28.667, 3.45707e-06, 12.329, 3.68912)

[node name="Physical Bone mixamorig_LeftShoulder" parent="animsfornpc/Armature/Skeleton3D" index="8"]
transform = Transform3D(-16.8367, 93.7351, -30.5, -41.8587, -34.8122, -83.8806, -89.2433, -1.35582, 45.0976, 14.0461, 31.1814, -140.001)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00603823, -0.0432578, 0.0121926)
body_offset = Transform3D(100, -2.38419e-05, -3.43323e-05, 1.81198e-05, 100, 8.58307e-05, 1.14441e-05, -8.96454e-05, 100, 0.603823, 4.32577, -1.21926)

[node name="Physical Bone mixamorig_LeftArm" parent="animsfornpc/Armature/Skeleton3D" index="9"]
transform = Transform3D(-46.9165, 35.3135, -80.9432, -45.932, -88.0416, -11.7871, -75.4261, 31.6487, 57.5262, 34.5167, 17.4984, -136.783)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00493581, -0.055139, -0.0183027)
body_offset = Transform3D(100, -3.8147e-06, -4.62532e-05, -7.62939e-06, 100, -2.95639e-05, 1.85966e-05, 4.00543e-05, 100, 0.49358, 5.5139, 1.83027)

[node name="Physical Bone mixamorig_LeftForeArm" parent="animsfornpc/Armature/Skeleton3D" index="10"]
transform = Transform3D(-14.2632, -82.643, -54.4674, -91.8697, -9.42337, 38.3556, -36.8309, 55.5098, -74.5798, 44.5903, 6.30919, -127.535)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.86012e-07, -6.05843e-07, 0.0945436)
body_offset = Transform3D(100, -3.05176e-05, -1.90735e-05, -1.90735e-05, 1.4782e-05, -100, 1.90735e-05, 100, -4.76837e-06, -9.67979e-05, 9.45436, 6.10352e-05)

[node name="Physical Bone mixamorig_RightShoulder" parent="animsfornpc/Armature/Skeleton3D" index="11"]
transform = Transform3D(42.4715, 37.8932, 82.2209, 39.841, -89.3751, 20.6103, 81.2949, 24.0041, -53.056, -25.429, 30.8641, -125.585)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.30725e-08, 1.14308e-06, 0.131017)
body_offset = Transform3D(100, 6.48499e-05, -5.43594e-05, -3.05176e-05, -4.3869e-05, -100, -6.10352e-05, 100, -5.72205e-05, 3.8147e-06, 13.1017, -0.000106812)

[node name="Physical Bone mixamorig_RightArm" parent="animsfornpc/Armature/Skeleton3D" index="12"]
transform = Transform3D(34.7043, -14.0925, 92.7201, 78.8405, -49.1588, -36.981, 50.7916, 85.935, -5.94962, -36.2872, 25.1606, -114.678)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00388327, -0.048879, -0.00795402)
body_offset = Transform3D(100, 4.19617e-05, -1.52588e-05, -2.67029e-05, 100, 5.72205e-05, 1.33514e-05, -7.05719e-05, 100, -0.388325, 4.8879, 0.795399)

[node name="Physical Bone mixamorig_RightForeArm" parent="animsfornpc/Armature/Skeleton3D" index="13"]
transform = Transform3D(22.8742, 92.0136, -31.7848, 76.3054, -37.2219, -52.8396, -60.4505, -12.1669, -78.7255, -34.5855, 25.9552, -98.3454)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.000410741, -0.00588796, 0.0988481)
body_offset = Transform3D(100, -8.01086e-05, 1.14441e-05, -1.52588e-05, -3.43323e-05, -100, 9.91821e-05, 100, -2.47955e-05, -0.0410757, 9.88481, 0.588799)

[node name="Physical Bone mixamorig_LeftUpLeg" parent="animsfornpc/Armature/Skeleton3D" index="14"]
transform = Transform3D(-95.8634, 6.82014, -27.635, 20.05, 85.0926, -48.5515, 20.2041, -52.0839, -82.9401, 17.1785, 9.77813, -82.0121)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -9.1803e-07, 2.18268e-06, 0.260796)
body_offset = Transform3D(100, -3.8147e-06, -2.09808e-05, -2.09808e-05, -2.28882e-05, -100, 0, 100, 1.14441e-05, 9.72748e-05, 26.0796, -0.000221252)

[node name="Physical Bone mixamorig_LeftLeg" parent="animsfornpc/Armature/Skeleton3D" index="15"]
transform = Transform3D(-90.0622, 43.4072, -2.14992, 34.1257, 73.6947, 58.3484, 26.9118, 51.8161, -81.184, 24.8999, 8.47545, -40.953)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.2203e-06, -1.24158e-06, 0.239329)
body_offset = Transform3D(100, -3.8147e-06, 3.8147e-06, 0, 6.86646e-05, -100, -1.14441e-05, 99.9999, 7.24792e-05, 0.000121117, 23.9329, 0.000106812)

[node name="Physical Bone mixamorig_LeftFoot" parent="animsfornpc/Armature/Skeleton3D" index="16"]
transform = Transform3D(-88.6082, 19.3057, -42.1413, 38.2176, 81.8735, -42.8503, 26.23, -54.0742, -79.9248, 29.5875, -1.24475, -13.6077)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.32016e-06, -7.43316e-07, 0.0990396)
body_offset = Transform3D(100, -1.33514e-05, 2.47955e-05, 3.8147e-06, 1.14441e-05, -100, 0, 100, 5.72205e-05, 0.000729561, 9.90395, 6.86646e-05)

[node name="Physical Bone mixamorig_LeftToeBase" parent="animsfornpc/Armature/Skeleton3D" index="17"]
transform = Transform3D(-87.551, -13.4557, -46.4087, 43.2707, 20.9122, -87.6945, 21.505, -96.8588, -12.4865, 35.5846, 6.44392, -5.20122)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.60965e-06, 2.29556e-06, 0.0392835)
body_offset = Transform3D(100, -9.53674e-06, 0.000400543, 0.00037384, 6.48499e-05, -100, 2.09808e-05, 100, -1.71661e-05, 0.00034523, 3.92835, -0.000228882)

[node name="Physical Bone mixamorig_RightUpLeg" parent="animsfornpc/Armature/Skeleton3D" index="18"]
transform = Transform3D(-98.6481, -15.3926, -5.62347, -11.8609, 90.7421, -40.3136, 11.3082, -39.1016, -91.3411, -8.32334, 9.27328, -77.9739)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.55518e-07, 2.66151e-08, 0.260797)
body_offset = Transform3D(100, -9.53674e-07, 5.76973e-05, 5.67436e-05, 0.000114441, -100, -3.8147e-06, 100, 0.000106812, -9.05991e-05, 26.0796, -3.05176e-05)

[node name="Physical Bone mixamorig_RightLeg" parent="animsfornpc/Armature/Skeleton3D" index="19"]
transform = Transform3D(-99.529, 5.21209, -8.17344, 0.733853, 88.1248, 47.2597, 9.66605, 46.9772, -87.748, -4.90073, 8.47641, -33.1532)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.04171e-06, -4.07587e-08, 0.239321)
body_offset = Transform3D(100, -1.13249e-06, -1.28746e-05, -1.64509e-05, 3.05176e-05, -100, 6.25849e-06, 100, 6.48499e-05, -0.000101089, 23.9321, -1.14441e-05)

[node name="Physical Bone mixamorig_RightFoot" parent="animsfornpc/Armature/Skeleton3D" index="20"]
transform = Transform3D(-95.1687, -17.695, 25.0961, -30.6961, 57.0068, -76.2101, -0.821117, -80.2316, -59.6843, -5.47401, 4.84709, -6.13866)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.59489e-07, -3.2884e-07, 0.100782)
body_offset = Transform3D(100, -1.14441e-05, -1.14441e-05, -9.53674e-06, 0.0001297, -100, -7.62939e-06, 100, 9.91821e-05, -2.47955e-05, 10.0782, 2.28882e-05)

[node name="Physical Bone mixamorig_RightToeBase" parent="animsfornpc/Armature/Skeleton3D" index="21"]
transform = Transform3D(-93.6683, -14.8705, 31.7036, -34.6747, 26.7438, -89.9023, 4.89014, -95.2031, -30.2068, -8.61302, 13.6477, -1.88113)
joint_offset = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.000968248, -0.0206331, 0.00669875)
body_offset = Transform3D(100, -2.47955e-05, 1.14441e-05, 3.8147e-06, 28.7348, -95.7826, 1.78814e-07, 95.7826, 28.7348, 0.0968242, 1.23451, 1.78381)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_iaepi")

[node name="VisionArea" type="Area3D" parent="."]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, 0, -0.944089)

[node name="cone" parent="VisionArea" instance=ExtResource("2_ds6il")]
transform = Transform3D(5, 0, 0, 0, -2.18557e-07, -5, 0, 5, -2.18557e-07, 0, 0, -6.49206)
visible = false

[node name="VisionConeCollision" type="CollisionShape3D" parent="VisionArea"]
transform = Transform3D(5, 0, 0, 0, -2.18557e-07, -5, 0, 5, -2.18557e-07, 0, 0, -6.49206)
shape = SubResource("ConvexPolygonShape3D_se6b1")

[node name="VisionTimer" type="Timer" parent="."]
wait_time = 0.25
autostart = true

[node name="VisionRayCast" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -1, 8.74228e-08, 0, -8.74228e-08, -1, 0, 0, 0)
target_position = Vector3(0, 0, -100)
debug_shape_custom_color = Color(1, 1, 0, 1)

[node name="AggroTimer" type="Timer" parent="."]
wait_time = 4.0
one_shot = true

[node name="IdleTimer" type="Timer" parent="."]
wait_time = 3.0
one_shot = true

[node name="deathtimer" type="Timer" parent="."]
wait_time = 3.0
one_shot = true

[node name="DamageArea" type="Area3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="DamageArea"]
shape = SubResource("CapsuleShape3D_5k4xv")
disabled = true

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]

[connection signal="timeout" from="VisionTimer" to="." method="_on_vision_timer_timeout"]
[connection signal="timeout" from="AggroTimer" to="." method="_on_aggro_timer_timeout"]
[connection signal="timeout" from="IdleTimer" to="." method="_on_idle_timer_timeout"]
[connection signal="timeout" from="deathtimer" to="." method="_on_deathtimer_timeout"]
[connection signal="target_reached" from="NavigationAgent3D" to="." method="_on_navigation_agent_3d_target_reached"]

[editable path="animsfornpc"]
